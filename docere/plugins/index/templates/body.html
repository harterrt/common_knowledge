<div class="row">
  <div class="twelve columns">
    <h1 style="margin-top:6rem">Report Index</h1>
  </div>
</div>

<div class="row">
<div class="sidebar four columns">
  <!-- give buttons a class name and use CSS to manipulate -->
  <div class='sidebar_group'>
    <h4>Products</h4>
    <ul>
    {% for product, count in directory.products.most_common() %}
      <li>{{product}} ({{ count }})</li>
    {% endfor %}
    </ul>
  </div>
  <div class='sidebar_group'>
    <h4>Areas</h4>
    <ul>
    {% for area, count in directory.areas.most_common() %}
      <li>{{area}} ({{ count }})</li>
    {% endfor %}
  </ul>
  </div>
  <div class='sidebar_group'>
    <h4>Artifact</h4>
    <ul>
    {% for artifact, count in directory.artifacts.most_common() %}
      <li>{{artifact}} ({{ count }})</li>
    {% endfor %}
    </ul>
  </div>
  <div class='sidebar_group'>
    <h4>Tags</h4>
    <ul>
    {% for tag, count in directory.tags.most_common() %}
      <li>{{tag}} ({{ count }})</li>
    {% endfor %}
  </ul>
  </div>
</div>

<div class="eight columns">
<table class="u-full-width">
  <thead>
    <tr>
      <th>
        Title
      </th>
      <th>
        Author
      </th>
      <th>
        Publish Date
      </th>
  </thead>

{% for report in reports|sort(attribute='publish_date', reverse=True) %}
  <tbody class="report" data-products="{{report.products | join (',')}}" data-areas="{{report.areas | join(',')}}"
  data-authors="{{report.authors | map('slugify_string') | join (',')}}" data-date="{{report.publish_date}}"
  data-artifacts="{{report.artifacts | join (',')}}" data-tags="{{report.tags | join (',')}}">
    <tr>
      <td>
        <a href="{{report.path}}">{{report.title}}</a>
        <a name="{{ slugify_report(report) }}" href="#{{ slugify_report(report) }}"><img src="assets/link.svg" alt="anchor"></a>
      </td>
      <td>
        {{ report.authors|join(', ') }}
      </td>
      <td>
        {{report.publish_date}}
      </td>
    </tr>
    {% if report.abstract %}
    <tr>
      <td colspan="3">
        {{report.abstract}}
      </td>
    </tr>
    {% endif %}
    <tr class="tag-tray">
      <td>
        <span class="tag-label">Product:</span><br>
        {{ report.products | join(",") or "None"}}
      </td>
      <td>
        <span class="tag-label">Areas:</span><br>
        {{ (report.areas + report.tags) | sort | join(",") or "None" }}
      </td>
      <td>
        <span class="tag-label">Artifact:</span><br>
        {{ report.artifacts | join(",") or "None"}}
      </td>
    </tr>
  </tbody>
{% endfor %}
</table>
</div>
</div>

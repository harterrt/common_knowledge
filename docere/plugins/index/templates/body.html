<h1 style="margin-top:6rem">Report Index</h1>

<table class="u-full-width">
  <thead>
    <tr>
      <th>
        Title
      </th>
      <th>
        Author
      </th>
      <th>
        Publish Date
      </th>
  </thead>
{% set product_list = [] %}
{% set artifact_list = [] %}
{% set area_list = [] %}
{% set project_list = [] %}
{% for report in reports|sort(attribute='publish_date', reverse=True) %}
  {{ product_list.append(report.get('product')) | default("", True) }}
  {{ artifact_list.append(report.get('artifact')) | default("", True) }}
  {{ area_list.append(report.get('area')) | default("", True) }}
  {{ project_list.append(report.get('project')) | default("", True) }}
  <tbody>
    <tr>
      <td>
        <a href="{{report.path}}">{{report.title}}</a>
        <a name="{{ slugify(report) }}" href="#{{ slugify(report) }}"><img src="assets/link.svg" alt="anchor"></a>
      </td>
      <td>
        {{report.author}}{{ report.authors|join(', ') }}
      </td>
      <td>
        {{report.publish_date}}
      </td>
    </tr>
    {% if report.abstract %}
    <tr>
      <td colspan="3">
        {{report.abstract}}
      </td>
    </tr>
    {% endif %}
    <tr class="tag-tray">
      <td>
        <span class="tag-label">Product:</span><br>
        {% if report.product is string %}
          {{ ([report.product] or ["None"]) | join(",") }}
        {% elif report.product is not string and report.product is iterable %}
        {{ report.product | join(",") }}
        {% endif %}
      </td>
      <td>
        <span class="tag-label">Area:</span><br>
        {% if report.area is string %}
          {{ ([report.area] or ["None"]) | join(",") }}
        {% elif report.area is not string and report.area is iterable %}
        {{ report.area | join(",") }}
        {% endif %}
      </td>
      <td>
        <span class="tag-label">Artifact:</span><br>
        {% if report.artifact is string %}
          {{ ([report.artifact] or ["None"]) | join(",") }}
        {% elif report.artifact is not string and report.artifact is iterable %}
        {{ report.artifact | join(",") }}
        {% endif %}
      </td>
    </tr>
  </tbody>
{% endfor %}
<!-- give buttons a class name and use CSS to manipulate -->
<tr class='sidebar_group'>
  <h4>Product</h4>
  {% for entry in product_list | unique %}
    {% if entry %}
      <button>{{entry}}</button>
    {% endif %}
  {% endfor %}
</tr>
<tr class='sidebar_group'>
  <h4>Area</h4>
  {% for entry in area_list | unique %}
    {% if entry %}
      <button>{{entry}}</button>
    {% endif %}
  {% endfor %}
</tr>
<tr class='sidebar_group'>
  <h4>Artifact</h4>
  {% for entry in artifact_list | unique %}
    {% if entry %}
      <button>{{entry}} </button>
    {% endif %}
  {% endfor %}
</tr>
<tr class='sidebar_group'>
  <h4>Project</h4>
  {% for entry in project_list | unique %}
    {% if entry %}
      <button>{{entry}}</button>
    {% endif %}
    {% endfor %}
</tr>
